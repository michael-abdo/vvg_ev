"use strict";(()=>{var e={};e.id=5512,e.ids=[5512],e.modules={3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11723:e=>{e.exports=require("querystring")},12412:e=>{e.exports=require("assert")},12704:(e,r,t)=>{t.r(r),t.d(r,{patchFetch:()=>y,routeModule:()=>f,serverHooks:()=>w,workAsyncStorage:()=>q,workUnitAsyncStorage:()=>h});var o={};t.r(o),t.d(o,{POST:()=>l,dynamic:()=>x});var i=t(96559),a=t(48088),s=t(37719),n=t(77718),p=t(27075),c=t(93213),d=t(63188),u=t(2591),m=t(35845);let x="force-dynamic",l=(0,n.ru)(async(e,r)=>{try{let{doc1Id:t,doc2Id:o}=await d.X.parseComparisonRequest(e);if(t===o)return p.wT.badRequest("Cannot compare a document with itself");let[i,a]=await Promise.all([c.YW.findById(t),c.YW.findById(o)]);if(!i||!a)return p.wT.notFound("One or both documents not found");if(!(0,p.LM)(i,r)||!(0,p.LM)(a,r))return p.wT.forbidden();if(!i.extracted_text||!a.extracted_text)return p.wT.validation("Both documents must have extracted text before comparison",{doc1HasText:!!i.extracted_text,doc2HasText:!!a.extracted_text});let s=i.extracted_text,n=a.extracted_text,u=(0,m.ZX)(s),x=(0,m.ZX)(n),{score:l,commonWords:f,uniqueToText1:q,uniqueToText2:h}=(0,m.Qr)(s,n),w=(0,m.Kd)(s),y=(0,m.Kd)(n),g={id:Date.now(),result:{summary:`Simple text comparison between "${i.original_name}" and "${a.original_name}"`,differences:[{section:"Document Statistics",type:"different",importance:"low",standard_text:`Word count: ${u.words}`,compared_text:`Word count: ${x.words}`,explanation:`Word count difference: ${u.words-x.words} words`},{section:"Content Length",type:"different",importance:"low",standard_text:`Character count: ${u.characters}`,compared_text:`Character count: ${x.characters}`,explanation:`Character count difference: ${u.characters-x.characters} characters`}]}};return p.ff.operation("comparison.simple",{data:{comparisonId:g.id,documents:{doc1:{id:i.id,name:i.original_name,stats:u},doc2:{id:a.id,name:a.original_name,stats:x}},similarity:{score:l,commonWords:f.size,uniqueToDoc1:q.size,uniqueToDoc2:h.size,interpretation:l>80?"Very Similar":l>60?"Similar":l>40?"Somewhat Similar":l>20?"Different":"Very Different"},sections:{doc1Sections:w,doc2Sections:y,commonSections:w.filter(e=>y.includes(e))},differences:g.result?.differences||[]},metadata:{similarityScore:Math.round(100*l)/100,analysisType:"simple"},status:"created"})}catch(e){return u.V.api.error("COMPARE_SIMPLE","Simple comparison failed",e),p.wT.serverError("Failed to perform comparison")}}),f=new i.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/compare/simple/route",pathname:"/api/compare/simple",filename:"route",bundlePath:"app/api/compare/simple/route"},resolvedPagePath:"/Users/Mike/Desktop/programming/3_current_projects/other/vvg/vvg_template/app/api/compare/simple/route.ts",nextConfigOutput:"",userland:o}),{workAsyncStorage:q,workUnitAsyncStorage:h,serverHooks:w}=f;function y(){return(0,s.patchFetch)({workAsyncStorage:q,workUnitAsyncStorage:h})}},19121:e=>{e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{e.exports=require("process")},21820:e=>{e.exports=require("os")},27910:e=>{e.exports=require("stream")},28354:e=>{e.exports=require("util")},29021:e=>{e.exports=require("fs")},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{e.exports=require("path")},34631:e=>{e.exports=require("tls")},41204:e=>{e.exports=require("string_decoder")},44870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{e.exports=require("crypto")},55591:e=>{e.exports=require("https")},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},66136:e=>{e.exports=require("timers")},74075:e=>{e.exports=require("zlib")},79428:e=>{e.exports=require("buffer")},79551:e=>{e.exports=require("url")},81630:e=>{e.exports=require("http")},91645:e=>{e.exports=require("net")},94735:e=>{e.exports=require("events")}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[4243,2190,8726,3523,9916,6101,7765,7718,2244],()=>t(12704));module.exports=o})();