exports.id=7765,exports.ids=[7765],exports.modules={45740:(e,s,t)=>{"use strict";t.d(s,{Ng:()=>l,ad:()=>o,bP:()=>i,kF:()=>a,vV:()=>c,wz:()=>E});let r=null,n=null;try{r=t(91728);let e=t(33873);r.addColors({error:"red",warn:"yellow",info:"green",http:"magenta",debug:"white"});let s=r.format.combine(r.format.timestamp({format:"YYYY-MM-DD HH:mm:ss.SSS"}),r.format.errors({stack:!0}),r.format.splat(),r.format.json()),o=[];o.push(new r.transports.Console({format:r.format.combine(r.format.colorize({all:!0}),r.format.printf(e=>`${e.timestamp} ${e.level}: ${e.message}`))})),o.push(new r.transports.File({filename:e.join(process.cwd(),"logs","error.log"),level:"error",maxsize:0xa00000,maxFiles:5})),o.push(new r.transports.File({filename:e.join(process.cwd(),"logs","combined.log"),maxsize:0xa00000,maxFiles:5})),n=r.createLogger({level:process.env.LOG_LEVEL||"info",levels:{error:0,warn:1,info:2,http:3,debug:4},format:s,transports:o})}catch(e){console.warn("Winston not available, using console fallback logging"),n={error:(e,s)=>{console.error(`[ERROR] ${new Date().toISOString()} ${e}`,s?JSON.stringify(s):"")},warn:(e,s)=>{console.warn(`[WARN] ${new Date().toISOString()} ${e}`,s?JSON.stringify(s):"")},info:(e,s)=>{console.log(`[INFO] ${new Date().toISOString()} ${e}`,s?JSON.stringify(s):"")},http:(e,s)=>{console.log(`[HTTP] ${new Date().toISOString()} ${e}`,s?JSON.stringify(s):"")},debug:(e,s)=>{"debug"===process.env.LOG_LEVEL&&console.log(`[DEBUG] ${new Date().toISOString()} ${e}`,s?JSON.stringify(s):"")}}}function o(e,s,t,r){n.http(`${e} ${s} ${t} ${r}ms`)}function i(e,s,t){n.info(`Auth: ${e}`,{userId:s,...t})}function a(e,s,t,r){n.debug(`DB: ${e} ${s} ${t}ms`,r)}function E(e,s,t,r){n.info(`File: ${e} ${s}`,{size:t,...r})}function c(e,s){n.error(e.message,{stack:e.stack,name:e.name,...s})}function l(e,s,t){n.debug(`Performance: ${e} took ${s}ms`,t)}},76809:(e,s,t)=>{"use strict";t.d(s,{N:()=>i});var r=t(27956),n=t(81571),o=t(45740);let i={providers:[(0,r.A)({clientId:n.$W.AZURE_AD_CLIENT_ID,clientSecret:n.$W.AZURE_AD_CLIENT_SECRET,tenantId:n.$W.AZURE_AD_TENANT_ID,authorization:{params:{scope:"openid profile email offline_access User.Read"}}})],pages:{signIn:"/sign-in",signOut:"/auth/signout"},callbacks:{jwt:async({token:e,account:s,profile:t})=>(s&&t&&(e.accessToken=s.access_token,e.id=t.sub||t.oid||t.email,(0,o.bP)("jwt-token-created",e.id,{provider:s.provider,email:t.email})),e),session:async({session:e,token:s})=>(e.user&&(e.user.id=s.id,e.accessToken=s.accessToken,(0,o.bP)("session-created",e.user.id,{email:e.user.email,name:e.user.name})),e),async redirect({url:e,baseUrl:s}){let t=s+n.$W.BASE_PATH;if(e.includes("/auth/signin"))return t+"/sign-in";if("/dashboard"===e||e.endsWith("/dashboard"))return t+"/dashboard";if(e.startsWith("/"))return t+e;try{if(new URL(e).origin===t)return e}catch{}return t+"/dashboard"}},events:{async signIn({user:e,account:s,profile:t}){(0,o.bP)("user-signed-in",e?.id,{email:e?.email,provider:s?.provider})},async signOut({token:e}){(0,o.bP)("user-signed-out",e?.id)},async createUser({user:e}){(0,o.bP)("user-created",e?.id,{email:e?.email})},async linkAccount({user:e,account:s}){(0,o.bP)("account-linked",e?.id,{provider:s?.provider})}},secret:n.$W.NEXTAUTH_SECRET,session:{strategy:"jwt",maxAge:2592e3},debug:!1}},78335:()=>{},81571:(e,s,t)=>{"use strict";t.d(s,{Eg:()=>a,Zt:()=>o,$W:()=>n});let r={resolved:function(){let e=function(e){if(!e||""===e||"/"===e)return"";let s=e.trim();return s.startsWith("/")||(s=`/${s}`),s.endsWith("/")&&s.length>1&&(s=s.slice(0,-1)),s}(process.env.BASE_PATH||"/template-staging");return function(e){if(""!==e){if(!e.startsWith("/"))throw Error(`BasePath must start with '/'. Got: ${e}`);if(e.endsWith("/"))throw Error(`BasePath must NOT end with '/'. Got: ${e}`);if(/[^a-zA-Z0-9\-_\/]/.test(e))throw Error(`BasePath contains invalid characters. Use only: a-z, A-Z, 0-9, -, _, /. Got: ${e}`);if(e.includes("//"))throw Error(`BasePath cannot contain double slashes. Got: ${e}`);if(e.length>100)throw Error(`BasePath too long (max 100 chars). Got: ${e.length} chars`)}}(e),""===e&&console.warn(`⚠️ [BasePath] Production running at root path (no basePath)`),e}(),utilities:null};r.utilities=function(e){return{basePath:e,buildPagePath:s=>{if(s.startsWith("http"))return s;let t=s.startsWith("/")?s:`/${s}`;return`${e}${t}`},buildApiPath:s=>{if(s.startsWith("http"))return s;let t=s.startsWith("/api/")?s:`/api/${s.replace(/^\//,"")}`;return`${e}${t}`},buildAssetPath:s=>{if(s.startsWith("http"))return s;let t=s.startsWith("/")?s:`/${s}`;return`${e}${t}`},stripBasePath:s=>e&&s.startsWith(e)?s.slice(e.length)||"/":s}}(r.resolved),r.resolved;let n={AZURE_AD_CLIENT_ID:process.env.AZURE_AD_CLIENT_ID||"",AZURE_AD_CLIENT_SECRET:process.env.AZURE_AD_CLIENT_SECRET||"",AZURE_AD_TENANT_ID:process.env.AZURE_AD_TENANT_ID||"",NEXTAUTH_URL:process.env.NEXTAUTH_URL||`http://localhost:${process.env.PORT}`,NEXTAUTH_SECRET:process.env.NEXTAUTH_SECRET||"fallback-secret-for-build",BASE_PATH:r.resolved,DB_TABLE_PREFIX:process.env.DB_TABLE_PREFIX||"",NODE_ENV:"production",OPENAI_API_KEY:process.env.OPENAI_API_KEY||"",QUEUE_SYSTEM_TOKEN:process.env.QUEUE_SYSTEM_TOKEN||"development-queue-token",IS_DEVELOPMENT:!1,IS_PRODUCTION:!0,MYSQL_HOST:process.env.MYSQL_HOST||"localhost",MYSQL_PORT:process.env.MYSQL_PORT||"3306",MYSQL_USER:process.env.MYSQL_USER||"root",MYSQL_PASSWORD:process.env.MYSQL_PASSWORD||"",MYSQL_DATABASE:process.env.MYSQL_DATABASE||"vvg_template",DATABASE_URL:process.env.DATABASE_URL||"",STORAGE_PROVIDER:process.env.STORAGE_PROVIDER||"local",AWS_ACCESS_KEY_ID:process.env.AWS_ACCESS_KEY_ID||"",AWS_SECRET_ACCESS_KEY:process.env.AWS_SECRET_ACCESS_KEY||"",AWS_REGION:process.env.AWS_REGION||"us-west-2",S3_BUCKET_NAME:process.env.S3_BUCKET_NAME||"vvg-template-shared-bucket",S3_FOLDER_PREFIX:process.env.S3_FOLDER_PREFIX||"documents/",S3_ACCESS:"true"===process.env.S3_ACCESS,app:{name:process.env.PROJECT_NAME||"vvg-template",email:process.env.SES_FROM_EMAIL||"noreply@example.com"},email:{smtp:{host:process.env.AWS_SES_SMTP_HOST||`email-smtp.${process.env.AWS_REGION||"us-east-1"}.amazonaws.com`,port:parseInt(process.env.AWS_SES_SMTP_PORT||"587",10),username:process.env.AWS_SES_SMTP_USERNAME||"",password:process.env.AWS_SES_SMTP_PASSWORD||""},from:process.env.SES_FROM_EMAIL||"noreply@example.com",testRecipient:process.env.SES_TEST_RECIPIENT||"",adminEmail:process.env.ADMIN_EMAIL||"",enableInDev:"true"===process.env.ENABLE_EMAIL_IN_DEV}},o={isDevelopment:()=>"development"===n.NODE_ENV,isProduction:()=>"production"===n.NODE_ENV,isTest:()=>"test"===n.NODE_ENV,isStaging:()=>"staging"===n.NODE_ENV,requireDevelopment:()=>{if(o.isProduction())throw Error("Development-only feature accessed in production")},devOnlyResponse:()=>o.isProduction()?new Response(null,{status:404}):null,hasDbAccess:()=>!!(n.DATABASE_URL||n.MYSQL_HOST&&n.MYSQL_DATABASE)},i={DEV_BYPASS:"false"!==process.env.FEATURE_DEV_BYPASS,devBypass:"false"!==process.env.FEATURE_DEV_BYPASS};({...n,basePath:{resolved:r.resolved,utilities:r.utilities}});let a={HEADERS:{DEV_BYPASS:"X-Dev-Bypass"},FILE_LIMITS:{ALLOWED_MIME_TYPES:["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","text/plain","text/csv"],ALLOWED_EXTENSIONS:[".pdf",".docx",".doc",".txt",".csv"],MAX_SIZE:0xa00000},QUEUE:{DEFAULT_PRIORITY:5,MAX_ATTEMPTS:3},MESSAGES:{UNAUTHORIZED:"Authentication required",FORBIDDEN:"Access denied",NOT_FOUND:"Resource not found",VALIDATION_ERROR:"Validation failed",INTERNAL_ERROR:"Internal server error"},RATE_LIMIT:{WINDOW_SIZE:9e5,MAX_REQUESTS:100}};n.NODE_ENV,o.isDevelopment(),o.isProduction(),process.env.QUEUE_SYSTEM_TOKEN},96487:()=>{}};